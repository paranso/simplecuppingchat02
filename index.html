<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Brewing Form</title>
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700&display=swap" rel="stylesheet"/>
  <style>
    /* 기본 폰트 & 색상 */
    body {
      font-family: 'Nanum Gothic', sans-serif;
      background: #fafafa;
      color: #333;
      padding: 20px;
      max-width: 700px;
      margin: auto;
      line-height: 1.6;
    }
    .container {
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }

    /* 제목 스타일 */
    h1 {
      font-size: 1.8rem;
      margin-bottom: 25px;
      text-align: center;
      color: #444;
      letter-spacing: 1px;
    }
    h2 {
      font-size: 1.2rem;
      margin: 30px 0 15px;
      padding-bottom: 5px;
      border-bottom: 2px solid #eee;
      color: #555;
    }

    /* 입력 필드 스타일 */
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 700;
      font-size: 0.95rem;
      color: #555;
    }
    input[type="text"],
    input[type="date"],
    input[type="number"],
    textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 0.95rem;
      margin-bottom: 15px;
      box-sizing: border-box;
    }
    textarea { resize: vertical; min-height: 80px; }

    /* 날짜 & 양 조합 */
    .date-row, .amount-row {
      display: flex;
      gap: 15px;
      margin-bottom: 10px;
    }
    .date-row label, .amount-row .input-group { flex: 1; position: relative; }
    .input-suffix {
      position: absolute; top: 50%; right: 12px; transform: translateY(-50%);
      color: #666; font-size: 0.9rem;
    }

    /* 비율 표시 */
    .ratio-display {
      text-align: right;
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 15px;
      visibility: hidden;
    }

    /* 체크박스 항목 공통 */
    .options {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 10px;
    }
    .options label {
      flex: 0 0 calc(33.333% - 10px);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #fdfdfd;
      font-size: 0.9rem;
      color: #444;
      cursor: pointer;
      box-sizing: border-box;
    }
    .options input {
      margin: 0;
      width: 1.1em;
      height: 1.1em;
    }

    /* 슬라이더 */
    .rating-container {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 15px;
    }
    .rating-value {
      min-width: 24px;
      text-align: center;
      background: #eee;
      border-radius: 4px;
      padding: 2px 6px;
      font-weight: 700;
    }

    /* 버튼 */
    button {
      width: 100%;
      padding: 14px;
      background: #007bff;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      transition: background 0.2s;
      margin-top: 10px;
    }
    button:hover { background: #0056b3; }

    /* 결과 영역 */
    #result-display {
      white-space: pre-wrap;
      background: #f0f0f0;
      padding: 15px;
      border-radius: 6px;
      border: 1px solid #e0e0e0;
      margin-top: 25px;
      font-size: 0.9rem;
      color: #333;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Brewing Form</h1>

    <!-- 기본 정보 -->
    <h2>기본 정보 입력</h2>
    <div class="date-row">
      <label>로스팅 날짜<input type="date" id="roasting-date"></label>
      <label>추출 날짜<input type="date" id="cupping-date"></label>
    </div>
    <label>이름 or ID<input type="text" id="user-id" placeholder="이름 또는 ID"></label>
    <label>커피 정보<input type="text" id="coffee-name" placeholder="예) 에티오피아 예가체프"></label>
    <label>물온도<input type="text" id="water-type" placeholder="예) 카본필터수 / 생수"></label>
    <label>추출온도<input type="text" id="drop-temp" placeholder="예) 93도"></label>
    <label>드리퍼/시간<input type="text" id="agtron" placeholder="예) 하리오v60 / 2분 30초"></label>
    <label>분쇄도<input type="text" id="grind-size" placeholder="예) 중간분쇄 / #25"></label>
    <div class="amount-row">
      <div class="input-group">
        <input type="number" id="bean-amount" placeholder="원두량" min="0" step="0.1"><span class="input-suffix">g</span>
      </div>
      <div class="input-group">
        <input type="number" id="brew-amount" placeholder="추출량" min="0" step="0.1"><span class="input-suffix">g</span>
      </div>
    </div>
    <div id="ratio-display" class="ratio-display">비율: 1:0</div>

    <!-- 향 맡기 -->
    <h2>1. 향 맡기</h2>
    <div class="options" id="aroma-section">
      <label>꽃향<input type="checkbox" value="꽃향"></label>
      <label>과일향<input type="checkbox" value="과일향"></label>
      <label>허브향<input type="checkbox" value="허브향"></label>
      <label>견과류향<input type="checkbox" value="견과류향"></label>
      <label>카라멜향<input type="checkbox" value="카라멜향"></label>
      <label>초콜릿향<input type="checkbox" value="초콜릿향"></label>
      <label>기타향<input type="checkbox" value="기타향"></label>
    </div>
    <label>기타 향<input type="text" id="aroma-text" placeholder="기타 향"></label>
    <div class="rating-container">
      <input type="range" id="aroma-rating" min="1" max="5" value="3"><span class="rating-value">3</span>
    </div>

    <!-- 맛보기 -->
    <h2>2. 맛보기</h2>
    <div class="options" id="taste-section">
      <label>단맛<input type="checkbox" value="단맛"></label>
      <label>신맛<input type="checkbox" value="신맛"></label>
      <label>쓴맛<input type="checkbox" value="쓴맛"></label>
      <label>기타맛<input type="checkbox" value="기타맛"></label>
    </div>
    <label>기타 맛<input type="text" id="taste-text" placeholder="기타 맛"></label>
    <div class="rating-container">
      <input type="range" id="taste-rating" min="1" max="5" value="3"><span class="rating-value">3</span>
    </div>

    <!-- 전체적인 느낌 -->
    <h2>3. 느낌</h2>
    <div class="options" id="feel-section">
      <label>부드러움<input type="checkbox" value="부드러움"></label>
      <label>묵직함<input type="checkbox" value="묵직함"></label>
      <label>깔끔함<input type="checkbox" value="깔끔함"></label>
      <label>씁쓸함<input type="checkbox" value="씁쓸함"></label>
      <label>달콤함<input type="checkbox" value="달콤함"></label>
      <label>상큼함<input type="checkbox" value="상큼함"></label>
      <label>기타느낌<input type="checkbox" value="기타느낌"></label>
    </div>
    <label>기타 느낌<input type="text" id="feel-text" placeholder="기타 느낌"></label>
    <div class="rating-container">
      <input type="range" id="overall-rating" min="1" max="5" value="3"><span class="rating-value">3</span>
    </div>

    <!-- 추가 메모 -->
    <h2>4. 추가 메모</h2>
    <textarea id="additional-note" placeholder="추가 메모"></textarea>

    <!-- 다음 브루잉 의견 -->
    <h2>5. 다음 브루잉 의견</h2>
    <textarea id="roasting-recommendation" placeholder="다음 브루잉 의견"></textarea>

    <button id="save-button">결과 저장</button>
    <pre id="result-display"></pre>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const bean = document.getElementById('bean-amount');
      const brew = document.getElementById('brew-amount');
      const ratio = document.getElementById('ratio-display');

      // 비율 계산
      function updateRatio() {
        const b = parseFloat(bean.value);
        const w = parseFloat(brew.value);
        if (!isNaN(b) && b>0 && !isNaN(w)) {
          ratio.textContent = `비율: 1:${(w/b).toFixed(1)}`;
          ratio.style.visibility = 'visible';
        } else {
          ratio.style.visibility = 'hidden';
        }
      }
      bean.addEventListener('input', updateRatio);
      brew.addEventListener('input', updateRatio);

      // 슬라이더 값 표시
      document.querySelectorAll('input[type="range"]').forEach(slider => {
        const disp = slider.nextElementSibling;
        disp.textContent = slider.value;
        slider.addEventListener('input', () => disp.textContent = slider.value);
      });

      // 결과 저장 클릭
      document.getElementById('save-button').addEventListener('click', () => {
        const out = [];

        // 기본 정보
        [
          ['로스팅 날짜','roasting-date'],
          ['추출 날짜','cupping-date'],
          ['이름/ID','user-id'],
          ['커피 정보','coffee-name'],
          ['물온도','water-type'],
          ['추출온도','drop-temp'],
          ['드리퍼/시간','agtron'],
          ['분쇄도','grind-size'],
          ['원두량(g)','bean-amount'],
          ['추출량(g)','brew-amount']
        ].forEach(([lbl,id]) => {
          const v = document.getElementById(id).value.trim()||'미입력';
          out.push(`${lbl}: ${v}`);
        });

        // 향/맛/느낌
        [
          ['1. 향 맡기','aroma-section','aroma-text','aroma-rating'],
          ['2. 맛보기','taste-section','taste-text','taste-rating'],
          ['3. 느낌','feel-section','feel-text','overall-rating']
        ].forEach(([t,s,txt,rt]) => {
          const sec = document.getElementById(s);
          const sel = Array.from(sec.querySelectorAll('input[type="checkbox"]:checked'))
                      .map(cb=>cb.value).join(', ')||'없음';
          const oth = document.getElementById(txt).value.trim()||'없음';
          const score = document.getElementById(rt).value;
          out.push(`${t} (${score}점)`);
          out.push(` - 선택: ${sel}`);
          out.push(` - 기타: ${oth}`);
        });

        // 메모
        [
          ['추가 메모','additional-note'],
          ['다음 브루잉 의견','roasting-recommendation']
        ].forEach(([lbl,id]) => {
          const v = document.getElementById(id).value.trim()||'없음';
          out.push(`${lbl}: ${v}`);
        });

        document.getElementById('result-display').textContent = out.join('\n');
      });
    });
  </script>
</body>
</html>
